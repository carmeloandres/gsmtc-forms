(()=>{"use strict";const e=window.wp.blocks,t=window.React,n=window.wp.i18n,s=window.wp.element,o=window.wp.blockEditor,l=window.wp.components;(0,e.registerBlockType)("gsmtc-forms/form",{edit:function({attributes:e,setAttributes:a}){const{id:r,name:m,response:i,message:c}=e,u=(0,o.useBlockProps)(),[d,f]=(0,s.useState)(!1),[p,g]=(0,s.useState)(!1),w=()=>{f(!1)};return(0,s.useEffect)((()=>{if("0"==r){let e=Math.trunc(Date.now()/1e3);a({id:e.toString()}),f(!0)}let e=Array.from(document.getElementsByClassName("editor-post-publish-button"));e.length>0&&e[0].addEventListener("click",w)}),[]),(0,s.useEffect)((()=>{g("hide"!=i)}),[i]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(l.Panel,null,(0,t.createElement)(l.PanelBody,{title:(0,n.__)("Form information ","gsmtc-forms"),initialOpen:!0},(0,t.createElement)(l.TextControl,{label:(0,n.__)("Form name","gsmtc-forms"),value:m,onChange:e=>a({name:e})}),(0,t.createElement)(l.Button,{disabled:d,onClick:()=>{let e=Math.trunc(Date.now()/1e3);a({id:e.toString()}),f(!0)},style:{backgroundColor:"#0073aa",color:"#fff",borderRadius:"4px",padding:"8px 16px",fontSize:"14px"}},(0,n.__)("Set as new Form","gsmtc-forms")))),(0,t.createElement)(l.Panel,null,(0,t.createElement)(l.PanelBody,{title:(0,n.__)("Form submit response ","gsmtc-forms"),initialOpen:!0},(0,t.createElement)(l.RadioControl,{label:(0,n.__)("Select response action after success submit","gsmtc-forms"),help:(0,n.__)("Chose what actiÃ³n to perform with form after a success submit","gsmtf-forms"),selected:i,options:[{label:"Nothing",value:"nothing"},{label:"Clean",value:"clean"},{label:"Hide",value:"hide"}],onChange:e=>a({response:e})}),(0,t.createElement)(l.TextControl,{label:(0,n.__)('Form message after success submit in "Hide response"',"gsmtc-forms"),value:c,disabled:p,onChange:e=>a({message:e})})))),(0,t.createElement)("div",null),(0,t.createElement)("form",{...u,id:r,name:m},(0,t.createElement)(o.InnerBlocks,null)))},save:function({attributes:e}){const{id:n,name:s,response:l,message:a}=e,r=o.useBlockProps.save();return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("form",{...r,id:n,name:s,"data-response":l,"data-message":a},(0,t.createElement)(o.InnerBlocks.Content,null)))}})})();